{% load i18n %}
{% load account %}
{% load socialaccount %}
{% load crispy_forms_tags %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication - NORSU Alumni Network - EYE ICONS REMOVED</title>
    
    <!-- Google Fonts - Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <style>
        /* NORSU Alumni System Variables */
        :root {
            --primary-color: #2b3c6b;
            --primary-dark: #1a2544;
            --secondary-color: #4a5568;
            --ui-background: #f7fafc;
            --ui-surface: #ffffff;
            --ui-border: #e2e8f0;
            --ui-hover: #edf2f7;
            --text-primary: #2d3748;
            --text-secondary: #718096;
            --text-muted: #a0aec0;
            --text-light: #ffffff;
            --feedback-success: #48bb78;
            --feedback-warning: #ed8936;
            --feedback-error: #e53e3e;
            --feedback-info: #4299e1;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --radius-sm: 0.25rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --font-primary: 'Poppins', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            background: linear-gradient(rgba(43, 60, 107, 0.8), rgba(26, 37, 68, 0.9)),
                        url('{% static "images/bg.jpg" %}') no-repeat center center;
            background-size: cover;
            background-attachment: fixed;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Main Container */
        .auth-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .auth-wrapper {
            background: var(--ui-surface);
            border-radius: 0.75rem;
            /* Enhanced multi-layered shadow for depth and professional appearance */
            box-shadow:
                0 25px 50px -12px rgba(43, 60, 107, 0.25),
                0 20px 25px -5px rgba(43, 60, 107, 0.1),
                0 10px 10px -5px rgba(43, 60, 107, 0.04),
                0 4px 6px -2px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            width: 100%;
            max-width: 800px;
            min-height: 500px;
            display: flex;
            position: relative;
        }

        /* Left Panel - Branding */
        .auth-brand-panel {
            flex: 0 0 40%;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%),
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><pattern id="campus-pattern" x="0" y="0" width="200" height="200" patternUnits="userSpaceOnUse"><circle cx="100" cy="100" r="3" fill="%23ffffff" opacity="0.1"/><circle cx="50" cy="50" r="2" fill="%23ffffff" opacity="0.05"/><circle cx="150" cy="150" r="2" fill="%23ffffff" opacity="0.05"/></pattern></defs><rect width="1000" height="1000" fill="url(%23campus-pattern)"/></svg>') repeat;
            background-size: cover, 200px 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem 1.5rem;
            color: var(--text-light);
            position: relative;
        }

        .auth-brand-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                rgba(43, 60, 107, 0.2) 0%, 
                rgba(26, 37, 68, 0.3) 50%,
                rgba(43, 60, 107, 0.2) 100%);
            pointer-events: none;
        }

        .brand-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .brand-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 1rem;
            filter: brightness(1.1) drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .brand-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .brand-subtitle {
            font-size: 1rem;
            opacity: 0.9;
            line-height: 1.5;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        /* Right Panel - Forms */
        .auth-form-panel {
            flex: 1;
            padding: 1.5rem 1.5rem;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Back to Home Button */
        /* Back to Home Button Container */
        .back-to-home-container {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
            width: 100%;
        }

        .back-to-home {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--ui-surface);
            border: 1px solid var(--ui-border);
            color: var(--primary-color);
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-md);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-sm);
        }

        .back-to-home:hover {
            background: var(--ui-surface);
            border-color: var(--primary-color);
            color: var(--primary-dark);
            transform: none;
            box-shadow: var(--shadow-sm);
        }

        .back-to-home:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(43, 60, 107, 0.25);
        }

        /* Tab Navigation */
        .auth-tabs {
            display: flex;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--ui-border);
            margin-top: 1rem;
        }

        .auth-tab {
            flex: 1;
            padding: 0.75rem;
            background: none;
            border: none;
            font-family: var(--font-primary);
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .auth-tab.active {
            color: var(--primary-color);
        }

        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-color);
            border-radius: 1px;
        }

        .auth-tab:hover:not(.active) {
            color: var(--text-primary);
        }

        /* Form Content */
        .auth-form-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .form-container {
            display: none;
        }

        .form-container.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Form Field Styling */
        .form-group {
            position: relative;
            margin-bottom: 1rem;
        }
        

        .password-field {
            position: relative;
            overflow: visible;
        }


        /* Show Password Checkbox Styles */
        .show-password-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
        }

        .show-password-checkbox {
            width: 18px;
            height: 18px;
            accent-color: var(--primary-color);
            cursor: pointer;
        }

        .show-password-label {
            color: var(--text-secondary);
            cursor: pointer;
            user-select: none;
            font-weight: 500;
        }

        /* Password Criteria Styles */
        .password-criteria {
            margin-top: 0.5rem;
            padding: 0.75rem;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: var(--radius-md);
            font-size: 0.75rem;
            font-style: italic;
            transition: all 0.3s ease;
            display: block;
            visibility: visible;
        }

        .criteria-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .criteria-title {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.75rem;
            font-style: italic;
        }

        .strength-indicator {
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .strength-indicator.weak {
            background: #fed7d7;
            color: #c53030;
        }

        .strength-indicator.fair {
            background: #fef5e7;
            color: #dd6b20;
        }

        .strength-indicator.good {
            background: #c6f6d5;
            color: #2f855a;
        }

        .strength-indicator.strong {
            background: #9ae6b4;
            color: #22543d;
        }

        .criteria-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .criterion {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .criterion i {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 0.75rem;
            transition: all 0.3s ease;
        }

        .criterion i.fa-times-circle {
            color: #e53e3e;
            background: #fed7d7;
        }

        .criterion i.fa-check-circle {
            color: #2f855a;
            background: #c6f6d5;
        }

        .criterion span {
            color: var(--text-secondary);
            font-size: 0.75rem;
            font-style: italic;
        }

        .criterion.valid span {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Password Match Indicator */
        .password-match-indicator {
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            transition: all 0.3s ease;
            display: block;
            visibility: visible;
        }

        .match-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .match-status i {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 0.75rem;
            transition: all 0.3s ease;
        }

        .match-status i.fa-times-circle {
            color: #e53e3e;
            background: #fed7d7;
        }

        .match-status i.fa-check-circle {
            color: #2f855a;
            background: #c6f6d5;
        }

        .match-status span {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .match-status.valid span {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Animation for criteria updates */
        .criterion.valid {
            animation: criteriaSuccess 0.5s ease;
        }

        @keyframes criteriaSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .form-input {
            width: 100%;
            padding: 1rem 0.75rem 0.5rem;
            border: 2px solid var(--ui-border);
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-family: var(--font-primary);
            background: var(--ui-surface);
            transition: all 0.3s ease;
            outline: none;
            box-sizing: border-box;
        }

        .form-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(43, 60, 107, 0.1);
        }

        .form-input:focus + .form-label,
        .form-input:not(:placeholder-shown) + .form-label,
        .form-input.has-value + .form-label {
            transform: translateY(-1.75rem) scale(0.8);
            color: var(--primary-color);
            background: var(--ui-surface);
            padding: 0 0.25rem;
            border-radius: 2px;
            font-weight: 600;
        }

        .form-label {
            position: absolute;
            left: 0.75rem;
            top: 1rem;
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 500;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: left top;
            z-index: 1;
        }

        .form-input:focus + .form-label {
            color: var(--primary-color);
        }

        /* Enhanced label visibility for better contrast */
        .form-input:focus + .form-label,
        .form-input:not(:placeholder-shown) + .form-label,
        .form-input.has-value + .form-label {
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        }

        /* Button Styling */
        .btn-auth {
            width: 100%;
            padding: 0.875rem;
            border: none;
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: 600;
            font-family: var(--font-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 0.75rem;
        }

        .btn-auth-primary {
            background: var(--primary-color);
            color: var(--text-light);
        }

        .btn-auth-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        /* Google Sign-In Button */
        .google-btn {
            background: var(--ui-surface);
            border: 2px solid #dc3545;
            color: #dc3545;
            text-decoration: none;
        }

        .google-btn:hover {
            background: #dc3545;
            color: var(--text-light);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .google-btn:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.25);
        }

        /* Links */
        .auth-links {
            text-align: center;
            margin-top: 1rem;
        }

        .auth-links a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .auth-links a:hover {
            color: var(--primary-dark);
        }

        /* ============================================
           MOBILE RESPONSIVE STYLES
           ============================================ */

        /* Tablet View - 768px to 991px */
        @media (max-width: 991.98px) {
            .auth-wrapper {
                max-width: 600px !important;
            }

            .brand-title {
                font-size: 1.5rem !important;
            }

            .brand-subtitle {
                font-size: 1rem !important;
            }

            .auth-tabs .nav-link {
                font-size: 1rem !important;
            }
        }

        /* Mobile View - 767px and below */
        @media (max-width: 767.98px) {
            .auth-wrapper {
                flex-direction: column !important;
                max-width: 90% !important;
                min-height: auto !important;
                box-shadow:
                    0 20px 40px -12px rgba(43, 60, 107, 0.2),
                    0 15px 20px -5px rgba(43, 60, 107, 0.08),
                    0 8px 8px -5px rgba(43, 60, 107, 0.03) !important;
            }
            
            .auth-brand-panel {
                flex: 0 0 auto !important;
                padding: 1.5rem !important;
                min-height: 180px !important;
            }
            
            .brand-logo {
                width: 70px !important;
                height: 70px !important;
                margin-bottom: 0.75rem !important;
            }
            
            .brand-title {
                font-size: 0.8125rem !important;
            }
            
            .brand-subtitle {
                font-size: 0.75rem !important;
            }
            
            .auth-form-panel {
                padding: 1rem 0.875rem !important;
            }
            
            .auth-tabs {
                margin-top: 0 !important;
            }

            .auth-tabs .nav-link {
                font-size: 0.75rem !important;
                padding: 0.625rem 1rem !important;
            }

            .form-label {
                font-size: 0.75rem !important;
            }

            .form-control {
                font-size: 0.75rem !important;
                padding: 0.625rem 0.875rem !important;
            }

            .btn {
                font-size: 0.75rem !important;
                padding: 0.625rem 1rem !important;
            }

            .show-password-container {
                font-size: 0.75rem !important;
            }

            .text-center p,
            .text-center a {
                font-size: 0.75rem !important;
            }

            .divider-text {
                font-size: 0.75rem !important;
            }

            .social-login-btn {
                font-size: 0.75rem !important;
                padding: 0.625rem !important;
            }

            .back-to-home {
                font-size: 0.75rem !important;
                padding: 0.5rem 1rem !important;
            }
        }

        /* Small Mobile - 575px and below */
        @media (max-width: 575.98px) {
            .auth-container {
                padding: 0.75rem !important;
            }

            .auth-wrapper {
                max-width: 92% !important;
            }

            .auth-brand-panel {
                padding: 1.25rem !important;
                min-height: 160px !important;
            }

            .brand-logo {
                width: 60px !important;
                height: 60px !important;
                margin-bottom: 0.625rem !important;
            }

            .brand-title {
                font-size: 0.75rem !important;
            }

            .brand-subtitle {
                font-size: 0.6875rem !important;
            }
            
            .auth-form-panel {
                padding: 0.875rem 0.75rem !important;
            }

            .auth-tabs .nav-link {
                font-size: 0.6875rem !important;
                padding: 0.5rem 0.875rem !important;
            }

            .form-label {
                font-size: 0.6875rem !important;
            }

            .form-control {
                font-size: 0.6875rem !important;
                padding: 0.5rem 0.75rem !important;
            }

            .btn {
                font-size: 0.6875rem !important;
                padding: 0.5rem 0.875rem !important;
            }
            
            .show-password-container {
                padding: 0.5rem !important;
                font-size: 0.6875rem !important;
            }

            .text-center p,
            .text-center a {
                font-size: 0.6875rem !important;
            }

            .divider-text {
                font-size: 0.6875rem !important;
            }

            .social-login-btn {
                font-size: 0.6875rem !important;
                padding: 0.5rem !important;
            }
            
            .back-to-home-container {
                margin-top: 0.875rem !important;
            }
            
            .back-to-home {
                padding: 0.5rem 0.875rem !important;
                font-size: 0.6875rem !important;
            }
        }

        /* Extra Small Mobile - 375px and below */
        @media (max-width: 375px) {
            .auth-container {
                padding: 0.5rem !important;
            }

            .auth-wrapper {
                max-width: 95% !important;
            }

            .auth-brand-panel {
                padding: 1rem !important;
                min-height: 140px !important;
            }

            .brand-logo {
                width: 50px !important;
                height: 50px !important;
                margin-bottom: 0.5rem !important;
            }

            .brand-title {
                font-size: 0.6875rem !important;
            }

            .brand-subtitle {
                font-size: 0.625rem !important;
            }

            .auth-form-panel {
                padding: 0.75rem 0.625rem !important;
            }

            .auth-tabs .nav-link {
                font-size: 0.625rem !important;
                padding: 0.375rem 0.75rem !important;
            }

            .form-label {
                font-size: 0.625rem !important;
            }

            .form-control {
                font-size: 0.625rem !important;
                padding: 0.375rem 0.625rem !important;
            }

            .btn {
                font-size: 0.625rem !important;
                padding: 0.375rem 0.75rem !important;
            }

            .show-password-container {
                padding: 0.375rem !important;
                font-size: 0.625rem !important;
            }

            .text-center p,
            .text-center a {
                font-size: 0.625rem !important;
            }

            .divider-text {
                font-size: 0.625rem !important;
            }

            .social-login-btn {
                font-size: 0.625rem !important;
                padding: 0.375rem !important;
            }

            .back-to-home {
                padding: 0.375rem 0.75rem !important;
                font-size: 0.625rem !important;
            }
        }

        /* Custom SweetAlert2 Styling for Terms Popup */
        .terms-popup {
            font-family: 'Poppins', sans-serif !important;
        }

        .terms-title {
            color: #2b3c6b !important;
            font-weight: 600 !important;
        }

        .terms-content {
            font-family: 'Poppins', sans-serif !important;
        }

        @media (max-width: 768px) {
            .swal2-popup.terms-popup {
                width: 95% !important;
                max-width: 500px !important;
            }
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-wrapper">
            <!-- Left Panel - Branding -->
            <div class="auth-brand-panel">
                <div class="brand-content">
                    <img src="{% static 'images/logo_norsu.png' %}" alt="NORSU Logo" class="brand-logo">
                    <h1 class="brand-title">NORSU Alumni Network</h1>
                    <p class="brand-subtitle">Connect with fellow alumni, stay updated with university news, and explore career opportunities in our growing community.</p>
                </div>
            </div>

            <!-- Right Panel - Forms -->
            <div class="auth-form-panel">
                <!-- Tab Navigation -->
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="switchTab('login')" id="loginTab">
                        <i class="fas fa-sign-in-alt me-2"></i>Login
                    </button>
                    <button class="auth-tab" onclick="switchTab('signup')" id="signupTab">
                        <i class="fas fa-user-plus me-2"></i>Sign Up
                    </button>
                </div>

                <!-- Form Content -->
                <div class="auth-form-content">
                    <!-- Login Form -->
                    <div class="form-container active" id="loginForm">
                        <form class="login" method="POST" action="{% url 'account_login' %}">
                            {% csrf_token %}

                            {% if form.errors %}
                            <div class="alert alert-danger" role="alert">
                                {% for field in form %}
                                    {% for error in field.errors %}
                                        <div>{{ field.label }}: {{ error }}</div>
                                    {% endfor %}
                                {% endfor %}
                                {% for error in form.non_field_errors %}
                                    <div>{{ error }}</div>
                                {% endfor %}
                            </div>
                            {% endif %}

                            <div class="form-group">
                                <input type="text" class="form-input" name="login" placeholder=" " required>
                                <label class="form-label">Email</label>
                            </div>

                            <div class="form-group password-field">
                                <input type="password" class="form-input" name="password" placeholder=" " required id="loginPassword">
                                <label class="form-label">Password</label>
                            </div>

                            <!-- Show Password Checkbox -->
                            <div class="show-password-container">
                                <input type="checkbox" id="showPasswordCheckbox" class="show-password-checkbox" onchange="togglePasswordVisibility()">
                                <label for="showPasswordCheckbox" class="show-password-label">
                                    <i class="fas fa-eye me-1"></i>Show Password
                                </label>
                            </div>

                            {% if redirect_field_value %}
                            <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
                            {% endif %}

                            <button class="btn-auth btn-auth-primary" type="submit">
                                <i class="fas fa-sign-in-alt me-2"></i>{% trans "Sign In" %}
                            </button>
                        </form>

                        <!-- Social Login Section -->
                        {% load socialaccount %}
                        {% if 'google' in enabled_sso_providers %}
                        <div class="social-login-section" style="margin-top: 1.5rem;">
                            <div class="divider" style="display: flex; align-items: center; text-align: center; margin: 1rem 0;">
                                <div style="flex: 1; border-bottom: 1px solid var(--ui-border);"></div>
                                <span style="padding: 0 1rem; color: var(--text-secondary); font-size: 0.875rem; font-weight: 500;">OR</span>
                                <div style="flex: 1; border-bottom: 1px solid var(--ui-border);"></div>
                            </div>
                            
                            <a href="/accounts/google/login/" 
                               class="btn btn-outline-danger w-100 google-btn"
                               style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.875rem; border-radius: var(--radius-md); font-weight: 600; transition: all 0.3s ease;">
                                <i class="fab fa-google"></i>
                                Sign in with Google
                            </a>
                        </div>
                        {% endif %}

                        {% if messages %}
                        <div class="mt-2">
                            {% for message in messages %}
                                <div class="alert alert-{{ message.tags|default:'info' }}" role="alert">{{ message }}</div>
                            {% endfor %}
                        </div>
                        {% endif %}

                        <div class="auth-links">
                            <p><a href="{% url 'account_reset_password' %}">Forgot Password?</a></p>
                        </div>
                    </div>

                    <!-- Signup Form -->
                    <div class="form-container" id="signupForm">
                        <form class="signup" method="POST" action="{% url 'accounts:enhanced_signup' %}">
                            {% csrf_token %}

                            <div class="form-group">
                                <input type="text" class="form-input" name="first_name" placeholder=" " required>
                                <label class="form-label">First Name</label>
                            </div>

                            <div class="form-group">
                                <input type="text" class="form-input" name="last_name" placeholder=" " required>
                                <label class="form-label">Last Name</label>
                            </div>

                            <div class="form-group">
                                <input type="email" class="form-input" name="email" placeholder=" " required id="signupEmail">
                                <label class="form-label">Email Address</label>
                            </div>

                            <div class="form-group password-field">
                                <input type="password" class="form-input" name="password1" placeholder=" " required id="signupPassword1" oninput="validatePassword()">
                                <label class="form-label">Password</label>
                                
                                <!-- Password Criteria Indicator -->
                                <div class="password-criteria" id="passwordCriteria">
                                    <div class="criteria-header">
                                        <span class="criteria-title">Password Requirements:</span>
                                        <span class="strength-indicator" id="strengthIndicator">Weak</span>
                                    </div>
                                    <div class="criteria-list">
                                        <div class="criterion" id="lengthCriterion">
                                            <i class="fas fa-times-circle"></i>
                                            <span>At least 8 characters</span>
                                        </div>
                                        <div class="criterion" id="uppercaseCriterion">
                                            <i class="fas fa-times-circle"></i>
                                            <span>One uppercase letter</span>
                                        </div>
                                        <div class="criterion" id="lowercaseCriterion">
                                            <i class="fas fa-times-circle"></i>
                                            <span>One lowercase letter</span>
                                        </div>
                                        <div class="criterion" id="numberCriterion">
                                            <i class="fas fa-times-circle"></i>
                                            <span>One number</span>
                                        </div>
                                        <div class="criterion" id="specialCriterion">
                                            <i class="fas fa-times-circle"></i>
                                            <span>One special character (!@#$%^&*)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group password-field">
                                <input type="password" class="form-input" name="password2" placeholder=" " required id="signupPassword2" oninput="validatePasswordMatch()">
                                <label class="form-label">Confirm Password</label>
                                
                                <!-- Password Match Indicator -->
                                <div class="password-match-indicator" id="passwordMatchIndicator">
                                    <div class="match-status" id="matchStatus">
                                        <i class="fas fa-times-circle"></i>
                                        <span>Passwords must match</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Show Password Checkbox for Signup -->
                            <div class="show-password-container">
                                <input type="checkbox" id="showSignupPasswordCheckbox" class="show-password-checkbox" onchange="toggleSignupPasswordVisibility()">
                                <label for="showSignupPasswordCheckbox" class="show-password-label">
                                    <i class="fas fa-eye me-1"></i>Show Passwords
                                </label>
                            </div>

                            <button class="btn-auth btn-auth-primary" type="submit" id="signupSubmitBtn">
                                <i class="fas fa-user-plus me-2"></i>{% trans "Create Account" %}
                            </button>
                        </form>

                        <!-- Social Signup Section -->
                        {% if 'google' in enabled_sso_providers %}
                        <div class="social-login-section" style="margin-top: 1.5rem;">
                            <div class="divider" style="display: flex; align-items: center; text-align: center; margin: 1rem 0;">
                                <div style="flex: 1; border-bottom: 1px solid var(--ui-border);"></div>
                                <span style="padding: 0 1rem; color: var(--text-secondary); font-size: 0.875rem; font-weight: 500;">OR</span>
                                <div style="flex: 1; border-bottom: 1px solid var(--ui-border);"></div>
                            </div>
                            
                            <a href="/accounts/google/login/" 
                               class="btn btn-outline-danger w-100 google-btn"
                               style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.875rem; border-radius: var(--radius-md); font-weight: 600; transition: all 0.3s ease;">
                                <i class="fab fa-google"></i>
                                Sign up with Google
                            </a>
                        </div>
                        {% endif %}

                        <div class="auth-links">
                            <p><small>By creating an account, you agree to our <a href="javascript:void(0)" onclick="showTermsPopup()" style="color: var(--primary-color); text-decoration: underline; cursor: pointer;">Terms of Service and Privacy Policy</a>.</small></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Back to Home Button - Outside Container -->
        <div class="back-to-home-container">
            <a href="{% url 'core:home' %}" class="back-to-home" aria-label="Return to home page">
                <i class="fas fa-home" aria-hidden="true"></i>
                <span>Back to Home</span>
            </a>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        function switchTab(tabName) {
            // Remove active class from all tabs and forms
            document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.form-container').forEach(form => form.classList.remove('active'));

            // Add active class to selected tab and form
            document.getElementById(tabName + 'Tab').classList.add('active');
            document.getElementById(tabName + 'Form').classList.add('active');
            
            // Initialize password criteria visibility when switching to signup tab
            if (tabName === 'signup') {
                const passwordCriteria = document.getElementById('passwordCriteria');
                const passwordMatchIndicator = document.getElementById('passwordMatchIndicator');
                
                if (passwordCriteria) {
                    passwordCriteria.style.display = 'block';
                    passwordCriteria.style.visibility = 'visible';
                }
                
                if (passwordMatchIndicator) {
                    passwordMatchIndicator.style.display = 'block';
                    passwordMatchIndicator.style.visibility = 'visible';
                }
            }
        }

        function togglePasswordVisibility() {
            const checkbox = document.getElementById('showPasswordCheckbox');
            const password = document.getElementById('loginPassword');
            const label = document.querySelector('.show-password-label i');

            if (checkbox.checked) {
                password.type = 'text';
                label.classList.remove('fa-eye');
                label.classList.add('fa-eye-slash');
            } else {
                password.type = 'password';
                label.classList.remove('fa-eye-slash');
                label.classList.add('fa-eye');
            }
        }

        function toggleSignupPasswordVisibility() {
            const checkbox = document.getElementById('showSignupPasswordCheckbox');
            const password1 = document.getElementById('signupPassword1');
            const password2 = document.getElementById('signupPassword2');
            const label = document.querySelector('#showSignupPasswordCheckbox + .show-password-label i');

            if (checkbox.checked) {
                password1.type = 'text';
                password2.type = 'text';
                label.classList.remove('fa-eye');
                label.classList.add('fa-eye-slash');
            } else {
                password1.type = 'password';
                password2.type = 'password';
                label.classList.remove('fa-eye-slash');
                label.classList.add('fa-eye');
            }
        }

        // Password validation functions
        function validatePassword() {
            const password = document.getElementById('signupPassword1').value;
            const criteria = {
                length: password.length >= 8,
                uppercase: /[A-Z]/.test(password),
                lowercase: /[a-z]/.test(password),
                number: /[0-9]/.test(password),
                special: /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)
            };

            // Update individual criteria
            updateCriterion('lengthCriterion', criteria.length);
            updateCriterion('uppercaseCriterion', criteria.uppercase);
            updateCriterion('lowercaseCriterion', criteria.lowercase);
            updateCriterion('numberCriterion', criteria.number);
            updateCriterion('specialCriterion', criteria.special);

            // Calculate and update strength indicator
            const validCriteria = Object.values(criteria).filter(Boolean).length;
            updateStrengthIndicator(validCriteria);

            // Also validate password match if confirm password has value
            if (document.getElementById('signupPassword2').value) {
                validatePasswordMatch();
            }
        }

        function updateCriterion(criterionId, isValid) {
            const criterion = document.getElementById(criterionId);
            const icon = criterion.querySelector('i');
            
            if (isValid) {
                criterion.classList.add('valid');
                icon.classList.remove('fa-times-circle');
                icon.classList.add('fa-check-circle');
            } else {
                criterion.classList.remove('valid');
                icon.classList.remove('fa-check-circle');
                icon.classList.add('fa-times-circle');
            }
        }

        function updateStrengthIndicator(validCriteria) {
            const indicator = document.getElementById('strengthIndicator');
            
            // Remove all strength classes
            indicator.classList.remove('weak', 'fair', 'good', 'strong');
            
            if (validCriteria < 2) {
                indicator.textContent = 'Weak';
                indicator.classList.add('weak');
            } else if (validCriteria < 3) {
                indicator.textContent = 'Fair';
                indicator.classList.add('fair');
            } else if (validCriteria < 5) {
                indicator.textContent = 'Good';
                indicator.classList.add('good');
            } else {
                indicator.textContent = 'Strong';
                indicator.classList.add('strong');
            }
        }

        function validatePasswordMatch() {
            const password1 = document.getElementById('signupPassword1').value;
            const password2 = document.getElementById('signupPassword2').value;
            const matchStatus = document.getElementById('matchStatus');
            const icon = matchStatus.querySelector('i');
            const text = matchStatus.querySelector('span');

            if (password2.length === 0) {
                matchStatus.classList.remove('valid');
                icon.classList.remove('fa-check-circle');
                icon.classList.add('fa-times-circle');
                text.textContent = 'Passwords must match';
                return false;
            }

            if (password1 === password2) {
                matchStatus.classList.add('valid');
                icon.classList.remove('fa-times-circle');
                icon.classList.add('fa-check-circle');
                text.textContent = 'Passwords match';
                return true;
            } else {
                matchStatus.classList.remove('valid');
                icon.classList.remove('fa-check-circle');
                icon.classList.add('fa-times-circle');
                text.textContent = 'Passwords do not match';
                return false;
            }
        }

        // Handle form input animations and label positioning
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize password criteria visibility
            const passwordCriteria = document.getElementById('passwordCriteria');
            const passwordMatchIndicator = document.getElementById('passwordMatchIndicator');
            
            if (passwordCriteria) {
                passwordCriteria.style.display = 'block';
                passwordCriteria.style.visibility = 'visible';
            }
            
            if (passwordMatchIndicator) {
                passwordMatchIndicator.style.display = 'block';
                passwordMatchIndicator.style.visibility = 'visible';
            }
            
            // Check for ACTUAL authentication errors (visible error messages from failed login attempts)
            // Only look for Django form errors that are actually rendered on the page
            const hasLoginErrors = document.querySelector('.alert-danger:not(:empty)');
            const hasDjangoFormErrors = document.querySelector('.errorlist li');
            const hasUrlErrors = window.location.search.includes('error=') || window.location.search.includes('invalid=');
            
            // Only consider it an auth error if there's actual visible error content
            const hasAuthErrors = hasLoginErrors || hasDjangoFormErrors || hasUrlErrors;
            
            // Debug logging
            console.log('Login - Error detection:', {
                hasLoginErrors: !!hasLoginErrors,
                hasDjangoFormErrors: !!hasDjangoFormErrors,
                hasUrlErrors: hasUrlErrors,
                hasAuthErrors: hasAuthErrors,
                sessionStorage: sessionStorage.getItem('norsu_terms_agreed')
            });
            
            // Only clear terms agreement if there was an actual authentication failure
            // This preserves the user's terms agreement on normal page visits
            const hasAgreedToTerms = sessionStorage.getItem('norsu_terms_agreed');
            
            if (hasAuthErrors) {
                console.log('Login - Authentication errors detected, clearing session storage');
                sessionStorage.removeItem('norsu_terms_agreed');
            }
            
            // Show disclaimer automatically when page loads (only if no previous agreement)
            const finalHasAgreedToTerms = sessionStorage.getItem('norsu_terms_agreed');
            if (!finalHasAgreedToTerms) {
                showTermsDisclaimer();
            }
            
            const inputs = document.querySelectorAll('.form-input');

            inputs.forEach(input => {
                // Check if input has value on page load
                if (input.value) {
                    input.classList.add('has-value');
                }

                // Handle input events for better label animation
                input.addEventListener('input', function() {
                    if (this.value) {
                        this.classList.add('has-value');
                    } else {
                        this.classList.remove('has-value');
                    }
                });

                input.addEventListener('blur', function() {
                    if (this.value) {
                        this.classList.add('has-value');
                    } else {
                        this.classList.remove('has-value');
                    }
                });

                // Handle focus for immediate label animation
                input.addEventListener('focus', function() {
                    this.classList.add('has-value');
                });

                // Remove has-value on blur if no content
                input.addEventListener('blur', function() {
                    if (!this.value) {
                        this.classList.remove('has-value');
                    }
                });
            });
        });

        // Terms and Conditions Disclaimer
        function showTermsDisclaimer() {
            // Check if user has already agreed to terms in this session
            const hasAgreedToTerms = sessionStorage.getItem('norsu_terms_agreed');
            
            if (hasAgreedToTerms) {
                console.log('Login - User already agreed to terms, showing welcome message');
                // User already agreed, just show a confirmation message
                Swal.fire({
                    icon: 'success',
                    title: 'Welcome Back!',
                    text: 'You have already agreed to our Terms and Conditions.',
                    confirmButtonText: 'Continue',
                    confirmButtonColor: '#2b3c6b',
                    timer: 2000,
                    showConfirmButton: true
                });
                return;
            }
            
            console.log('Login - Showing full terms disclaimer');
            
            Swal.fire({
                title: '<strong>Terms of Service and Privacy Policy</strong>',
                html: `
                    <div style="text-align: left; max-height: 500px; overflow-y: auto; padding: 25px 30px; font-family: 'Poppins', sans-serif; color: #2d3748; background: #ffffff;">
                        <!-- Letterhead -->
                        <div style="text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px double #2b3c6b;">
                            <h5 style="color: #2b3c6b; margin: 0; font-weight: 700; font-size: 22px; letter-spacing: 1px; text-transform: uppercase;">Negros Oriental State University</h5>
                            <p style="margin: 8px 0 0 0; color: #4a5568; font-size: 14px; font-weight: 500; letter-spacing: 0.5px;">Alumni Network Platform</p>
                            <p style="margin: 5px 0 0 0; color: #718096; font-size: 12px; font-style: italic;">Dumaguete City, Philippines</p>
                        </div>
                        
                        <!-- Document Title -->
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h6 style="color: #2b3c6b; margin: 0; font-weight: 700; font-size: 18px; text-transform: uppercase; letter-spacing: 1.5px;">Terms of Service and Privacy Policy</h6>
                            <p style="margin: 10px 0 0 0; color: #718096; font-size: 12px; font-style: italic;">Effective Date: February 12, 2026</p>
                        </div>
                        
                        <!-- Introduction -->
                        <div style="margin-bottom: 25px; text-align: justify;">
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-indent: 40px;">This document constitutes a legally binding agreement between you (the "User") and Negros Oriental State University (the "University") regarding your use of the NORSU Alumni Network platform (the "Platform"). By accessing or using the Platform, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service and Privacy Policy.</p>
                        </div>
                        
                        <!-- Article I -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article I. Acceptance of Terms</h6>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Your access to and use of the Platform is conditioned upon your acceptance of and compliance with these Terms. These Terms apply to all visitors, users, and others who access or use the Platform. If you disagree with any part of these Terms, you must not access or use the Platform.</p>
                        </div>
                        
                        <!-- Article II -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article II. Account Registration and Security</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Users are required to provide accurate, current, and complete information during the registration process. You are solely responsible for maintaining the confidentiality of your account credentials, including your username and password, and for all activities that occur under your account.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">You agree to immediately notify the University of any unauthorized use of your account or any other breach of security. The University shall not be liable for any loss or damage arising from your failure to comply with this security obligation.</p>
                        </div>
                        
                        <!-- Article III -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article III. Privacy and Data Protection</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">The University collects, processes, and stores personal information in accordance with the Data Privacy Act of 2012 (Republic Act No. 10173) and other applicable data protection laws and regulations. Your personal data will be used exclusively for the following purposes: facilitating alumni connections, disseminating university updates, providing career development opportunities, and improving Platform services.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">The University is committed to protecting your privacy and will not sell, rent, lease, or share your personal information with third parties for commercial purposes without your explicit written consent, except as required by law or as necessary to provide Platform services.</p>
                        </div>
                        
                        <!-- Article IV -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article IV. Acceptable Use and Conduct</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Users must maintain professional and respectful communication at all times while using the Platform. Prohibited activities include, but are not limited to: posting offensive, defamatory, obscene, or inappropriate content; engaging in harassment, discrimination, or hate speech; distributing spam, unsolicited commercial messages, or chain letters; violating intellectual property rights of others; impersonating any person or entity; and attempting to compromise Platform security or interfere with its proper functioning.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Violation of these guidelines may result in immediate account suspension or termination, at the sole discretion of the University, without prior notice.</p>
                        </div>
                        
                        <!-- Article V -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article V. Intellectual Property Rights</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Users retain all ownership rights to content they submit to the Platform. However, by posting, uploading, or otherwise making available any content on the Platform, you hereby grant the University a non-exclusive, worldwide, perpetual, irrevocable, royalty-free, sublicensable, and transferable license to use, reproduce, modify, adapt, publish, translate, create derivative works from, distribute, perform, and display such content in any media formats and through any media channels.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">This license is granted solely for the purposes of operating, promoting, and improving the Platform and facilitating alumni networking, educational, and career development activities.</p>
                        </div>
                        
                        <!-- Article VI -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article VI. Disclaimer of Warranties and Limitation of Liability</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">The Platform is provided on an "as is" and "as available" basis without warranties of any kind, either express or implied, including but not limited to implied warranties of merchantability, fitness for a particular purpose, or non-infringement. The University does not warrant that the Platform will be uninterrupted, secure, or error-free.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">To the fullest extent permitted by applicable law, the University and its officers, employees, agents, and affiliates shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, use, goodwill, or other intangible losses, arising from or relating to your use of or inability to use the Platform.</p>
                        </div>
                        
                        <!-- Article VII -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article VII. Modifications and Amendments</h6>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">The University reserves the right to modify, amend, or update these Terms of Service and Privacy Policy at any time, at its sole discretion. Users will be notified of material changes through the Platform or via email to the address associated with their account. Your continued use of the Platform following the posting of revised Terms constitutes your acceptance of such changes.</p>
                        </div>
                        
                        <!-- Closing Statement -->
                        <div style="margin-top: 35px; padding-top: 20px; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; font-weight: 600;">By proceeding with registration and clicking "I Agree" or by accessing and using the Platform, you acknowledge that you have read, understood, and agree to be legally bound by these Terms of Service and Privacy Policy in their entirety.</p>
                        </div>
                        
                        <!-- Footer -->
                        <div style="text-align: center; margin-top: 30px; padding-top: 15px; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0; font-size: 11px; color: #a0aec0; font-style: italic;">Document Reference: NORSU-AN-TOS-2026-001</p>
                            <p style="margin: 5px 0 0 0; font-size: 11px; color: #a0aec0; font-style: italic;">Last Revised: February 12, 2026</p>
                        </div>
                    </div>
                `,
                width: '750px',
                showCancelButton: true,
                confirmButtonText: 'I Agree & Continue',
                cancelButtonText: 'Cancel',
                confirmButtonColor: '#2b3c6b',
                cancelButtonColor: '#718096',
                reverseButtons: true,
                allowOutsideClick: false,
                allowEscapeKey: false,
                focusConfirm: true,
                customClass: {
                    popup: 'terms-popup',
                    title: 'terms-title',
                    htmlContainer: 'terms-content'
                }
            }).then((result) => {
                 if (result.isConfirmed) {
                     // User agreed to terms, store agreement in session storage
                     sessionStorage.setItem('norsu_terms_agreed', 'true');
                     console.log('User agreed to terms and conditions');
                 } else {
                     // User declined, redirect to landing page
                     Swal.fire({
                         title: 'Access Denied',
                         text: 'You must agree to the Terms and Conditions to access the NORSU Alumni Network.',
                         icon: 'info',
                         confirmButtonText: 'OK',
                         confirmButtonColor: '#2b3c6b'
                     }).then(() => {
                         window.location.href = '/';
                     });
                 }
             });
        }

        // Show Terms Popup (for viewing only, no agreement required)
        function showTermsPopup() {
            Swal.fire({
                title: '<strong>Terms of Service and Privacy Policy</strong>',
                html: `
                    <div style="text-align: left; max-height: 500px; overflow-y: auto; padding: 25px 30px; font-family: 'Poppins', sans-serif; color: #2d3748; background: #ffffff;">
                        <!-- Letterhead -->
                        <div style="text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 3px double #2b3c6b;">
                            <h5 style="color: #2b3c6b; margin: 0; font-weight: 700; font-size: 22px; letter-spacing: 1px; text-transform: uppercase;">Negros Oriental State University</h5>
                            <p style="margin: 8px 0 0 0; color: #4a5568; font-size: 14px; font-weight: 500; letter-spacing: 0.5px;">Alumni Network Platform</p>
                            <p style="margin: 5px 0 0 0; color: #718096; font-size: 12px; font-style: italic;">Dumaguete City, Philippines</p>
                        </div>
                        
                        <!-- Document Title -->
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h6 style="color: #2b3c6b; margin: 0; font-weight: 700; font-size: 18px; text-transform: uppercase; letter-spacing: 1.5px;">Terms of Service and Privacy Policy</h6>
                            <p style="margin: 10px 0 0 0; color: #718096; font-size: 12px; font-style: italic;">Effective Date: February 12, 2026</p>
                        </div>
                        
                        <!-- Introduction -->
                        <div style="margin-bottom: 25px; text-align: justify;">
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-indent: 40px;">This document constitutes a legally binding agreement between you (the "User") and Negros Oriental State University (the "University") regarding your use of the NORSU Alumni Network platform (the "Platform"). By accessing or using the Platform, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service and Privacy Policy.</p>
                        </div>
                        
                        <!-- Article I -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article I. Acceptance of Terms</h6>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Your access to and use of the Platform is conditioned upon your acceptance of and compliance with these Terms. These Terms apply to all visitors, users, and others who access or use the Platform. If you disagree with any part of these Terms, you must not access or use the Platform.</p>
                        </div>
                        
                        <!-- Article II -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article II. Account Registration and Security</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Users are required to provide accurate, current, and complete information during the registration process. You are solely responsible for maintaining the confidentiality of your account credentials, including your username and password, and for all activities that occur under your account.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">You agree to immediately notify the University of any unauthorized use of your account or any other breach of security. The University shall not be liable for any loss or damage arising from your failure to comply with this security obligation.</p>
                        </div>
                        
                        <!-- Article III -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article III. Privacy and Data Protection</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">The University collects, processes, and stores personal information in accordance with the Data Privacy Act of 2012 (Republic Act No. 10173) and other applicable data protection laws and regulations. Your personal data will be used exclusively for the following purposes: facilitating alumni connections, disseminating university updates, providing career development opportunities, and improving Platform services.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">The University is committed to protecting your privacy and will not sell, rent, lease, or share your personal information with third parties for commercial purposes without your explicit written consent, except as required by law or as necessary to provide Platform services.</p>
                        </div>
                        
                        <!-- Article IV -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article IV. Acceptable Use and Conduct</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Users must maintain professional and respectful communication at all times while using the Platform. Prohibited activities include, but are not limited to: posting offensive, defamatory, obscene, or inappropriate content; engaging in harassment, discrimination, or hate speech; distributing spam, unsolicited commercial messages, or chain letters; violating intellectual property rights of others; impersonating any person or entity; and attempting to compromise Platform security or interfere with its proper functioning.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Violation of these guidelines may result in immediate account suspension or termination, at the sole discretion of the University, without prior notice.</p>
                        </div>
                        
                        <!-- Article V -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article V. Intellectual Property Rights</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">Users retain all ownership rights to content they submit to the Platform. However, by posting, uploading, or otherwise making available any content on the Platform, you hereby grant the University a non-exclusive, worldwide, perpetual, irrevocable, royalty-free, sublicensable, and transferable license to use, reproduce, modify, adapt, publish, translate, create derivative works from, distribute, perform, and display such content in any media formats and through any media channels.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">This license is granted solely for the purposes of operating, promoting, and improving the Platform and facilitating alumni networking, educational, and career development activities.</p>
                        </div>
                        
                        <!-- Article VI -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article VI. Disclaimer of Warranties and Limitation of Liability</h6>
                            <p style="margin: 0 0 10px 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">The Platform is provided on an "as is" and "as available" basis without warranties of any kind, either express or implied, including but not limited to implied warranties of merchantability, fitness for a particular purpose, or non-infringement. The University does not warrant that the Platform will be uninterrupted, secure, or error-free.</p>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">To the fullest extent permitted by applicable law, the University and its officers, employees, agents, and affiliates shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, use, goodwill, or other intangible losses, arising from or relating to your use of or inability to use the Platform.</p>
                        </div>
                        
                        <!-- Article VII -->
                        <div style="margin-bottom: 25px;">
                            <h6 style="color: #2b3c6b; margin: 0 0 12px 0; font-weight: 700; font-size: 15px; text-transform: uppercase; letter-spacing: 0.8px;">Article VII. Modifications and Amendments</h6>
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; text-indent: 40px;">The University reserves the right to modify, amend, or update these Terms of Service and Privacy Policy at any time, at its sole discretion. Users will be notified of material changes through the Platform or via email to the address associated with their account. Your continued use of the Platform following the posting of revised Terms constitutes your acceptance of such changes.</p>
                        </div>
                        
                        <!-- Closing Statement -->
                        <div style="margin-top: 35px; padding-top: 20px; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0; font-size: 14px; line-height: 1.8; color: #4a5568; text-align: justify; font-weight: 600;">By proceeding with registration and clicking "I Agree" or by accessing and using the Platform, you acknowledge that you have read, understood, and agree to be legally bound by these Terms of Service and Privacy Policy in their entirety.</p>
                        </div>
                        
                        <!-- Footer -->
                        <div style="text-align: center; margin-top: 30px; padding-top: 15px; border-top: 1px solid #e2e8f0;">
                            <p style="margin: 0; font-size: 11px; color: #a0aec0; font-style: italic;">Document Reference: NORSU-AN-TOS-2026-001</p>
                            <p style="margin: 5px 0 0 0; font-size: 11px; color: #a0aec0; font-style: italic;">Last Revised: February 12, 2026</p>
                        </div>
                    </div>
                `,
                width: '750px',
                confirmButtonText: 'Close',
                confirmButtonColor: '#2b3c6b',
                customClass: {
                    popup: 'terms-popup',
                    title: 'terms-title',
                    htmlContainer: 'terms-content'
                }
            });
        }
    </script>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Availability Checker Styles and Script -->
    <link rel="stylesheet" href="{% static 'css/availability-checker.css' %}">
    <script src="{% static 'js/availability-checker.js' %}"></script>
    <script>
        // Initialize availability checker for email field when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize email availability checker
            const emailChecker = new AvailabilityChecker(
                'signupEmail',
                'email',
                '{% url "accounts:check_availability" %}',
                500  // 500ms debounce delay
            );
        });
    </script>
    
    <!-- reCAPTCHA callback functions -->
    <script>
        // reCAPTCHA callback functions - define globally
        window.onRecaptchaSuccess = function(token) {
            console.log('reCAPTCHA success:', token);
        };
        
        window.onRecaptchaExpired = function() {
            console.log('reCAPTCHA expired');
        };
        
        window.onRecaptchaError = function(error) {
            // Suppress undefined errors as they're harmless initialization issues
            if (error && error !== 'undefined' && error !== undefined) {
                console.warn('reCAPTCHA encountered an error:', error);
            }
            // Silently handle undefined errors - they don't affect functionality
        };
        
        // Also define as global functions for compatibility
        function onRecaptchaSuccess(token) {
            console.log('reCAPTCHA success:', token);
        }
        
        function onRecaptchaExpired() {
            console.log('reCAPTCHA expired');
        }
        
        function onRecaptchaError(error) {
            // Suppress undefined errors as they're harmless initialization issues
            if (error && error !== 'undefined' && error !== undefined) {
                console.warn('reCAPTCHA encountered an error:', error);
            }
            // Silently handle undefined errors - they don't affect functionality
        }
        
        // Load reCAPTCHA after DOM is ready (only if enabled and has valid key)
        document.addEventListener('DOMContentLoaded', function() {
            // Handle Django messages with SweetAlert
            {% if messages %}
                {% for message in messages %}
                    {% if message.tags == 'error' %}
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: '{{ message|escapejs }}',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#e53e3e'
                        });
                    {% elif message.tags == 'warning' %}
                        Swal.fire({
                            icon: 'warning',
                            title: 'Warning',
                            text: '{{ message|escapejs }}',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#ed8936'
                        });
                    {% elif message.tags == 'success' %}
                        Swal.fire({
                            icon: 'success',
                            title: 'Success',
                            text: '{{ message|escapejs }}',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#48bb78'
                        });
                    {% else %}
                        Swal.fire({
                            icon: 'info',
                            title: 'Notice',
                            text: '{{ message|escapejs }}',
                            confirmButtonText: 'OK',
                            confirmButtonColor: '#4299e1'
                        });
                    {% endif %}
                {% endfor %}
            {% endif %}
            
            {% if recaptcha_enabled and recaptcha_public_key %}
            // Load reCAPTCHA script dynamically
            var script = document.createElement('script');
            script.src = 'https://www.google.com/recaptcha/api.js?render={{ recaptcha_public_key }}';
            script.async = true;
            script.defer = true;
            script.onerror = function() {
                console.error('Failed to load reCAPTCHA script');
                // Allow form submission without reCAPTCHA if script fails to load
                window.recaptchaFailed = true;
            };
            document.head.appendChild(script);
            
            // Handle signup form submission with reCAPTCHA
            const signupForm = document.querySelector('#signupForm form');
            const signupSubmitBtn = document.getElementById('signupSubmitBtn');
            
            if (signupForm && signupSubmitBtn) {
                signupForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Disable submit button to prevent double submission
                    signupSubmitBtn.disabled = true;
                    signupSubmitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Creating Account...';
                    
                    // If reCAPTCHA failed to load, submit without it
                    if (window.recaptchaFailed) {
                        console.log('Submitting form without reCAPTCHA (script failed to load)');
                        signupForm.submit();
                        return;
                    }
                    
                    // Check if grecaptcha is available
                    if (typeof grecaptcha === 'undefined') {
                        console.error('grecaptcha is not defined - reCAPTCHA may not have loaded');
                        // Submit form anyway
                        signupForm.submit();
                        return;
                    }
                    
                    // Execute reCAPTCHA
                    grecaptcha.ready(function() {
                        grecaptcha.execute('{{ recaptcha_public_key }}', {action: 'signup'}).then(function(token) {
                            console.log('reCAPTCHA token obtained successfully');
                            // Add the token to the form
                            const tokenInput = document.createElement('input');
                            tokenInput.type = 'hidden';
                            tokenInput.name = 'captcha';
                            tokenInput.value = token;
                            signupForm.appendChild(tokenInput);
                            
                            // Submit the form
                            signupForm.submit();
                        }).catch(function(error) {
                            console.error('reCAPTCHA execution failed:', error);
                            // Re-enable button and show error
                            signupSubmitBtn.disabled = false;
                            signupSubmitBtn.innerHTML = '<i class="fas fa-user-plus me-2"></i>Create Account';
                            
                            Swal.fire({
                                icon: 'warning',
                                title: 'Security Verification Issue',
                                text: 'There was an issue with security verification. The form will be submitted anyway.',
                                confirmButtonText: 'Continue',
                                confirmButtonColor: '#2b3c6b'
                            }).then(function() {
                                // Submit the form without reCAPTCHA
                                signupForm.submit();
                            });
                        });
                    });
                });
            }
            {% else %}
            // reCAPTCHA not enabled - allow normal form submission
            console.log('reCAPTCHA is not enabled, form will submit normally');
            {% endif %}
            
            // Handle form validation errors with SweetAlert
            const errorElements = document.querySelectorAll('.alert-danger, .errorlist, .form-error, [class*="error"]');
            if (errorElements.length > 0) {
                let errorMessages = [];
                
                errorElements.forEach(element => {
                    if (element.textContent && element.textContent.trim()) {
                        errorMessages.push(element.textContent.trim());
                    }
                });
                
                if (errorMessages.length > 0) {
                    // Remove duplicates and join messages
                    const uniqueErrors = [...new Set(errorMessages)];
                    const errorText = uniqueErrors.join('\n');
                    
                    Swal.fire({
                        icon: 'error',
                        title: 'Validation Error',
                        text: errorText,
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#e53e3e'
                    });
                }
            }
        });
    </script>
</body>
</html>
