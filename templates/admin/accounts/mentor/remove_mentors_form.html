{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
    &rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
    &rsaquo; <a href="{% url 'admin:accounts_mentor_changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
    &rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<div id="content-main">
    <h1>{{ title }}</h1>
    
    <div class="module">
        <p>You are about to disable the following mentor(s):</p>
        <ul>
            {% for mentor in mentors %}
            <li><strong>{{ mentor.user.get_full_name }}</strong> ({{ mentor.user.email }})</li>
            {% endfor %}
        </ul>
        
        <form method="post" id="remove-mentors-form">
            {% csrf_token %}
            
            <div class="form-row">
                <div>
                    <label for="removal_reason" style="font-weight: bold; display: block; margin-bottom: 8px;">
                        Disable Reason <span style="color: red;">*</span>
                    </label>
                    <textarea 
                        id="removal_reason" 
                        name="removal_reason" 
                        rows="5" 
                        cols="80" 
                        required
                        style="width: 100%; max-width: 600px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: inherit;"
                        placeholder="Please provide a reason for disabling these mentor(s)..."
                    ></textarea>
                    <p class="help" style="margin-top: 8px; color: #666; font-size: 0.875rem;">
                        This reason will be stored in the audit log and associated with the disable action.
                    </p>
                </div>
            </div>
            
            <div class="submit-row">
                <input type="submit" value="Disable Mentors" class="default" style="background-color: #dc3545; border-color: #dc3545;">
                <a href="{% url 'admin:accounts_mentor_changelist' %}" class="button" style="margin-left: 10px;">Cancel</a>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('remove-mentors-form');
    const reasonField = document.getElementById('removal_reason');
    
    form.addEventListener('submit', function(e) {
        const reason = reasonField.value.trim();
        
        if (!reason) {
            e.preventDefault();
            alert('Please provide a disable reason.');
            reasonField.focus();
            return false;
        }
        
        if (!confirm('Are you sure you want to disable the selected mentor(s)? This action cannot be undone.')) {
            e.preventDefault();
            return false;
        }
    });
});
</script>
{% endblock %}

