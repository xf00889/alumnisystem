{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}
    {% if object %}
        {% blocktranslate with title=object.title %}Edit Report: {{ title }}{% endblocktranslate %}
    {% else %}
        {% translate 'Create New Report' %}
    {% endif %}
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">{% translate 'Home' %}</a>
    &rsaquo; <a href="{% url 'surveys:survey_list' %}">{% translate 'Surveys' %}</a>
    &rsaquo; <a href="{% url 'surveys:report_list' %}">{% translate 'Reports' %}</a>
    &rsaquo; 
    {% if object %}
        {% translate 'Edit' %}
    {% else %}
        {% translate 'Create' %}
    {% endif %}
</div>
{% endblock %}

{% block content %}
<div class="module">
    <h1>
        {% if object %}
            {% blocktranslate with title=object.title %}Edit Report: {{ title }}{% endblocktranslate %}
        {% else %}
            {% translate 'Create New Report' %}
        {% endif %}
    </h1>
    
    <form method="post" class="report-form">
        {% csrf_token %}
        
        {% if form.errors %}
            <div class="errornote">
                {% translate 'Please correct the errors below.' %}
            </div>
        {% endif %}
        
        <fieldset class="module aligned">
            <h2>{% translate 'Report Information' %}</h2>
            
            <div class="form-row">
                <div>
                    {{ form.title.label_tag }}
                    {{ form.title }}
                    {% if form.title.errors %}
                        <ul class="errorlist">
                            {% for error in form.title.errors %}
                                <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    {% if form.title.help_text %}
                        <p class="help">{{ form.title.help_text }}</p>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-row">
                <div>
                    {{ form.description.label_tag }}
                    {{ form.description }}
                    {% if form.description.errors %}
                        <ul class="errorlist">
                            {% for error in form.description.errors %}
                                <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    {% if form.description.help_text %}
                        <p class="help">{{ form.description.help_text }}</p>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-row">
                <div>
                    {{ form.report_type.label_tag }}
                    {{ form.report_type }}
                    {% if form.report_type.errors %}
                        <ul class="errorlist">
                            {% for error in form.report_type.errors %}
                                <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                    {% if form.report_type.help_text %}
                        <p class="help">{{ form.report_type.help_text }}</p>
                    {% endif %}
                </div>
            </div>
        </fieldset>
        
        <div class="submit-row">
            <input type="submit" value="{% if object %}{% translate 'Save changes' %}{% else %}{% translate 'Create Report' %}{% endif %}" class="default" />
            <a href="{% url 'surveys:report_list' %}" class="button cancel-link">
                {% translate 'Cancel' %}
            </a>
        </div>
    </form>
</div>

<style>
.module {
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 20px;
}

.module h1 {
    background: #f8f8f8;
    border-bottom: 1px solid #ddd;
    margin: 0;
    padding: 10px 15px;
    font-size: 18px;
    color: #333;
}

.module h2 {
    margin: 0 0 10px 0;
    padding: 8px 10px;
    font-size: 14px;
    background: #f8f8f8;
    border-bottom: 1px solid #eee;
}

.report-form {
    padding: 15px;
}

.form-row {
    margin-bottom: 15px;
}

.form-row label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
    color: #333;
}

.form-row input[type="text"],
.form-row textarea,
.form-row select {
    width: 100%;
    max-width: 500px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 13px;
}

.form-row textarea {
    height: 80px;
    resize: vertical;
}

.errorlist {
    color: #ba2121;
    margin: 5px 0;
    padding: 0;
    list-style: none;
}

.errorlist li {
    font-size: 12px;
}

.errornote {
    background: #ffc;
    border: 1px solid #ddd;
    padding: 10px;
    margin-bottom: 15px;
    border-radius: 4px;
}

.help {
    font-size: 11px;
    color: #666;
    margin-top: 5px;
}

.submit-row {
    background: #f8f8f8;
    border-top: 1px solid #ddd;
    margin: 15px -15px -15px -15px;
    padding: 10px 15px;
    text-align: right;
}

.submit-row input[type="submit"] {
    background: #417690;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    margin-right: 10px;
}

.submit-row input[type="submit"]:hover {
    background: #205067;
}

.cancel-link {
    background: #6c757d;
    color: white;
    padding: 8px 15px;
    text-decoration: none;
    border-radius: 4px;
    font-size: 13px;
}

.cancel-link:hover {
    background: #545b62;
    color: white;
}

.aligned .form-row {
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
}

.aligned .form-row:last-child {
    border-bottom: none;
}
</style>
{% endblock %}